<!DOCTYPE html>

<html lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108056731-3"></script>
    <script>

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-108056731-3');
    </script>

    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <meta name="description" content="Emmares" />
    <meta name="keywords" content="Emmares" />
    <meta name="robots" content="index, follow" />

 

    <title>EMMARES</title>

    <style>
        .col-sm-12 {
            width: 140%!important;
        }
        .footer {
            position: absolute !important;
            bottom: 5px !important;
        }
        /* The switch - the box around the slider */
        .loading {
            width: 150px;
            height: 70px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .ball {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: black;
            margin: 0 10px;
        }

        .first {
            animation: slide 2s ease-in-out infinite;
            animation-delay: .1s;
        }

        .second {
            animation: slide 2s ease-in-out infinite;
            animation-delay: .5s;
        }

        .third {
            animation: slide 2s ease-in-out infinite;
            animation-delay: 1s;
        }

        @keyframes slide {
            from {
                transform: translateY(-30px);
            }

            to {
                transform: translateY(0);
            }
        }


        .buttons {
            display: flex;
        }

            .buttons div {
                margin: 0px 10px;
                color: #fffffa;
                cursor: pointer;
            }

                .buttons div > * {
                    pointer-events: none;
                }

        .switch {
            overflow: hidden;
            display: inline-block;
            width: 8em;
            background: #222;
            padding: 0.125em;
            color: black;
            cursor: pointer;
        }

            .switch input {
                position: absolute;
                visibility: hidden;
            }

            .switch span {
                position: relative;
                left: 0%;
                display: block;
                text-transform: uppercase;

                /**
     * Holo doesn't have any transition, but
     * it's added here for demo purposes
     */
                -webkit-transition: left 200ms ease-out;
                -moz-transition: left 200ms ease-out;
                -o-transition: left 200ms ease-out;
                transition: left 200ms ease-out;
            }

            .switch :checked + span {
                left: 50%;
            }

            /* Default unchecked state */
            .switch span:before {
                
                display: block;
                width: 50%;
                background-color: ghostwhite;
                border-radius: 0.15em;
                box-shadow: inset 0 0.1em 0 rgba(255, 255, 255, 0.3);
                color: #b3b3b3;
            }

            /* Checked state */
            .switch :checked + span:before {
                content: attr(data-checked);
                background-color: #0099CC;
            }


        /* Base styles */
        html {
            font: 100%/1.5 'Roboto', sans-serif;
            padding-top: 3em;
            background-color: #0e1012;
            color: #b3b3b3;
            text-align: left!important;
        }

        h1 {
            font-weight: 100;
        }
        .buttons {
            display: flex;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 30px;
            top:30px!important;
            float: left !important;
            margin-left: 740px;
        }

            /* Hide default HTML checkbox */
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }


        .totalresultsclassGrid {
            font-size: 15px !important;
            color: #ffffff !important;
            font-weight: normal !important;
            line-height: 1.6 !important;
            text-align: justify !important;
            position: absolute;
            top: -150px;
            right: 300px!important;
        }
        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

      

            .slider:before {
                position: absolute;
                content: "";
                height: 26px;
                width: 26px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                -webkit-transition: .4s;
                transition: .4s;
            }
   
        input:checked + .slider {
            background-color: #2196F3;
        }

        .center {
            margin: auto;
            align-items: center;
            align-content: center;
            align-self: center;
        }

        .grid_div {
            align-content: center !important;
            margin: auto !important;
            display: grid !important;
            grid-auto-columns: max-content !important;
            grid-auto-flow: dense !important;
            grid-auto-rows: minmax(100px, auto) !important;
            grid-gap: 25px !important;
            grid-template-columns: repeat(5, 1fr) !important;
            max-width: 800px !important;
            width: 100% !important;
            position: absolute !important;
            left: 7% !important;
            top: 250px !important;

        }

    
        input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
        }
      
        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        .btn.btn-primary.subscribeButton {
            margin-top: 10px!important;
            position:absolute!important;
            bottom:0!important;
            left:50%!important;
        }

        img:before {
            content: ' ' !important;
            display: block !important;
            position: absolute !important;
            height: 200px !important;
            width: 400px !important;
            background-image: url(http://10.100.100.152:8080/default.jpg) !important;
        }

        .optinlinkclass {
            position: relative!important;
            bottom: 0px!important;
        }

        .grid_div {
            margin: auto !important;
        }

        .grid-item {
            grid-row: span 1 !important;
            grid-column: span 1 !important;
            position: relative !important;
            bottom: 0px !important;
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

            .slider.round:before {
                border-radius: 50%;
            }

        /* Pagination links */
        .pagination a {
            color: black;
            float: left;
            padding: 8px 16px;
            text-decoration: none;
            transition: background-color .3s;
        }

            /* Style the active/current link */
            .pagination a.active {
                background-color: dodgerblue;
                color: white;
            }

            /* Add a grey background color on mouse-over */
            .pagination a:hover:not(.active) {
                background-color: #ddd;
            }

        .results {
            overflow: auto;
            position:fixed;
            top: 100px;
            bottom: 0;
            right: 0;
            width: 500px;
            border: 3px solid #73AD;
            resize:both;  

        }
        .align {
            text-align: center;
        }
        .switch {
            float: right;
        }
    </style>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <!--<link rel="stylesheet" href="lib/Layout/style.css">-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css" rel="stylesheet" />
    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108056731-3"></script>

    <script>

        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }

        gtag('js', new Date());



        gtag('config', 'UA-108056731-3');

    </script>

    <script>

        var isMobile = false; // Initiate as false
        // Device detection
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
            isMobile = true;
        }
        if (isMobile) {
            $('head').append('<link rel="stylesheet" href="lib/Layout/resultspagemobile.css">');
        }
        else {
            $('head').append('<link rel="stylesheet" href="lib/Layout/resultspagedesktop.css">');
        }
    </script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <style>

        @import url('https://fonts.googleapis.com/css?family=Montserrat');
    </style>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css" rel="stylesheet" />


    <script>
   

        function setCookie(name, value, exp_days) {

            var d = new Date();

            d.setTime(d.getTime() + (exp_days * 24 * 60 * 60 * 1000));

            var expires = "expires=" + d.toGMTString();

            document.cookie = name + "=" + value + ";" + expires + ";path=/";

        }

        function ChangeTheCheckBoxValue() {
         

        }


        fixBrokenImages = function (url) {
            var img = document.getElementsByTagName('img');
            var i = 0, l = img.length;
            for (; i < l; i++) {
                var t = img[i];
                if (t.naturalWidth === 0) {
                    // this image is broken
                    t.src = url;
                }
            }
        }


        window.onload = function () {
            fixBrokenImages('/images/default.jpg');
        }
        var contentgoogle = "";

        function hndlr(response) {
            var i, item;
            for (i = 0; i < 5; i = i + 1) {
                item = response.items[i];
                // in production code, item.htmlTitle should have the HTML entities escaped.
                contentgoogle += "<br>" + "<a target='_blank' href='" + item.link + "'>" + item.title + "</a>" + "<br>" + item.snippet + "<br>" + "<a target='_blank' href='" + item.link + "'>" + item.link + "</a>" + "<br><br>";
            }
            
        }
        

        function goonresults() {
            var linktosearchresults = "/resultspage.html?q=" + (document.getElementById("searchString2").value);
            window.location.href = linktosearchresults;
        }



   


        function entersearchininput() {
            var searchq = window.location.search.split("?q=")[1];
            if (searchq !== undefined) {
                //searchq = searchq.replace(/%20/g, " ");
                //searchq = searchq.replace(/'+'/g, " ");
                //searchq = searchq.replace(/%20/g, " ");
                searchq = decodeURI(searchq);
                document.getElementById("searchString2").value = searchq;
            }


            // if preference is for the normal view show normal view otherwise show grid view.

            // Setting a cookie

            // Two options: normal and grid.
        
           view = getCookie("view");


            if (view != "grid") {

                // Initial setup.

                $('.list').css('background-color', 'rgba(126, 179, 0, 0.5)');
                document.getElementById("gridView").removeAttribute("style");
                GetAPI(page);
                pageGRID++;
                page++;
               

            } else {
                $('.grid').css('background-color', 'rgba(126, 179, 0, 0.5)');
                document.getElementById("listView").removeAttribute("style");
                GetAPIGrid(pageGRID);
                pageGRID++;
                page++;
             

            }

            
        }
        if (window.attachEvent) {

            window.attachEvent('onload', entersearchininput);

        } else {

            if (window.onload) {
                var curronload = window.onload;
                var newonload = function (evt) {
                    curronload(evt);
                    entersearchininput(evt);
                };

                window.onload = newonload;

            } else {

                window.onload = entersearchininput;
            }
        }

        function validURL(str) {
            var pattern = new RegExp('^(https?:\\/\\/)?' + // protocol
                '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name
                '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address
                '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path
                '(\\?[;&a-z\\d%_.~+=-]*)?' + // query string
                '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locator
            return !!pattern.test(str);
        }


  


        // Flag for disabling calling the API more then once before the execution is complete. isActive boolean.

        var isActive = false;
        var requestNumber = 1;

        // Change the value once the GET API is completed.

        $(document).ready(function () {
            $("#listView").click(function () {
                $('.list').css('background-color', 'rgba(126, 179, 0, 0.5)');
                document.getElementById("gridView").removeAttribute("style");

                toggle();
            });
        });

        $(document).ready(function () {
            $("#gridView").click(function () {
                $('.grid').css('background-color', 'rgba(126, 179, 0, 0.5)');
                document.getElementById("listView").removeAttribute("style");

                toggle();

            });
        });

        window.addEventListener('scroll', () => {
            
            view = AsignValue();
            
            const { scrollHeight, scrollTop, clientHeight } = document.documentElement;

            
            // If you want to tweak this, smaller the right side of the equation is the less sensitive the event becomes.
            
            
            if (!isActive && scrollTop + clientHeight > scrollHeight - 3) {
         

                isActive = true;

                if (view == true) {

                    GetAPIGrid(pageGRID);
                    pageGRID++;

                } else {

                    GetAPI(page);
                    page++;
                }
            } 
        });



        function myFunction() {
            var image = document.getElementById("img");
            image.src = "images/default.jpg";
        }

        

        function GetAPI(page) {

                var table = $('#body').find('.col-sm-12 results_div');
                var img = document.createElement("img");
                img.id = "loading";
                img.style.margin = "0 auto";

                img.style.display = "block";
                img.src = "images/ajax-loader.gif";
                img.alt = "Loading - please wait";
                document.body.appendChild(img);


                const http2 = new XMLHttpRequest();


            if (sessionStorage.getItem("country") != null)

                    var get_search2 = "/SearchAPI/get_search/" + decodeURIComponent(document.getElementById("searchString2").value + sessionStorage.getItem("country"));
                else

                    var get_search2 = "/SearchAPI/get_search/" + decodeURIComponent(document.getElementById("searchString2").value);

                // alert(get_search2);

                http2.open("GET", get_search2);
                http2.send();
                http2.onload = () => {



                    var name = document.getElementsByClassName("results_names");
                    var fromaddr = document.getElementsByClassName("addrFrom");
                    var desccampaign = document.getElementsByClassName("campaignDesc");
                    var ratingResult = document.getElementsByClassName("ratingResult");
                    var optinlinkclass = document.getElementsByClassName("optinlinkclass");

                    // Regular expressions for parsing. Removing special characters, removing links, finding the matched word.

                    const regExpressionSpecialCharacters = /[^a-zA-Z ]/g;
                    const regExpressionLongWords = /\b\w{13,}\b/g; // more than 13 characters in a word.

                    var x = JSON.parse(http2.responseText);

                    $(".grid-item").remove();


                    if (x.hits.total == 1) {


                        for (var p = ((page - 1) * 10) + 1; p <= x.hits.total; p++) {
                            if (validURL(x.hits.hits[p - 1]._source.affiliatelink)) {
                                if (x.hits.hits[p - 1]._source.score == 0.0)
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style = 'color:white; text-decoration: none;' > <div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'><br><br></div> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                else
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div><br><br> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                            } else {
                                if (x.hits.hits[p - 1]._source.score == 0.0)
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'></div<br><br> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                else
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div><br><br> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                            }
                            $(".results_div").append(resulttemplate);
                        }

                    } else {


                        if (x.hits.total == 0) {
                            showgoogle();
                        } else {

                            var totalres; // all results on page
                            if (x.hits.total > 10)
                                totalres = 10;
                            else
                                totalres = x.hits.total;

                            for (var p = ((page - 1) * 10) + 1; p <= totalres * page; p++) { // Here is where pagination goes.
                                if (validURL(x.hits.hits[p - 1]._source.affiliatelink)) {
                                    if (x.hits.hits[p - 1]._source.score == 0.0)
                                        var resulttemplate = "<a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style = 'color:white; text-decoration: none;' > <div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' target='_blank' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'></div> <br><br><div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                    else
                                        var resulttemplate = "<a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' target='_blank' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div><br><br> <div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                } else {
                                    if (x.hits.hits[p - 1]._source.score == 0.0)
                                        var resulttemplate = "<a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'></div> <br><br><div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                    else
                                        var resulttemplate = "<a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 200) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 400).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div><br><br> <div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                }

                                $(".results_div").append(resulttemplate);
                            }
                         }

                }

                    var image_loading = document.getElementById('loading');
                    image_loading.parentNode.removeChild(image_loading);



                    isActive = false;


            }
           


                $("#searchString2").focus();
                var input = document.getElementById("searchString2");
                input.addEventListener("keyup", function (event) {
                    if (event.keyCode === 13) {
                        event.preventDefault();
                        goonresults();
                    }
                });


        }

        var time = 0;

        /**
         * / Grid layout API call.
         * @param pagegrid
         */
        function GetAPIGrid(pagegrid) {

            var p = ((pagegrid - 1) * 10) + 1;

                $("#footer").remove();

                var table = $('#body').find('.col-sm-12 results_div');
                var img = document.createElement("img");
                img.id = "loading";
                img.style.margin = "0 auto";

                img.style.display = "block";
                img.src = "images/ajax-loader.gif";
                img.alt = "Loading - please wait";
                document.body.appendChild(img);


                const http2 = new XMLHttpRequest();
                if (sessionStorage.getItem("country") != null)

                    var get_search2 = "/SearchAPI/get_search/" + decodeURIComponent(document.getElementById("searchString2").value + sessionStorage.getItem("country"));
                else
                    var get_search2 = "/SearchAPI/get_search/" + decodeURIComponent(document.getElementById("searchString2").value);

                // alert(get_search2);

                http2.open("GET", get_search2);

            http2.send();

                http2.onload = () => {

                    var name = document.getElementsByClassName("results_names");
                    var fromaddr = document.getElementsByClassName("addrFrom");
                    var desccampaign = document.getElementsByClassName("campaignDesc");
                    var ratingResult = document.getElementsByClassName("ratingResult");
                    var optinlinkclass = document.getElementsByClassName("optinlinkclass");

                    // Regular expressions for parsing. Removing special characters, removing links, finding the matched word.

                    const regExpressionSpecialCharacters = /[^a-zA-Z ]/g;
                    const regExpressionLongWords = /\b\w{13,}\b/g; // more than 13 characters in a word.

                    // x[0].innerHTML = http2.responseText;
                    var x = JSON.parse(http2.responseText);


                    $(".result_div").remove();


                    if (x.hits.total == 1) {
                        //  $(".results_div").append("<div class='totalresultsclassGrid'>" + x.hits.total + " result </div></div>");
                        for (var p = ((pagegrid - 1) * 10) + 1; p <= x.hits.total; p++) {

                            // var image = '<img src="C:\Users\emmaresmvp\Desktop\emares\Emmares\Emmares4\App_Data\images' + x.hits.hits[p - 1]._source.messageid + '.jpg width="700" height="400">';
                            if (validURL(x.hits.hits[p - 1]._source.affiliatelink)) {


                                if (x.hits.hits[p - 1]._source.score == 0.0)
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style = 'color:white; text-decoration: none;' > <div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 300) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'></div> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                else
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 300) + "<a href='" + x.hits.hits[p - 1]._source.affiliatelink + "' type='submit' style='color:black; font-weight:900; margin:5px' class='btn btn-primary previewButton'>Open Link</a><a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                            } else {
                                if (x.hits.hits[p - 1]._source.score == 0.0)
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 300) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'></div> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                                else
                                    var resulttemplate = "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='counter'>" + p + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 300) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200) + " ... click to see more. </div></div><div class='resultWra'><div class='ratingResult'>" + x.hits.hits[p - 1]._source.score + "</div> <div type='submit' class='btn btn-primary subscribeButton'><a class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a>";
                            }
                            $(".grid_div").append(resulttemplate);
                        }
                    } else {


                        if (x.hits.total == 0) {
                            //  $(".results_div").append("<div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='totalresultsclass'>" + x.hits.total + " results for emails, search on web: <br><br><div id='contentgoogle'>" + contentgoogle + "</div> </div></div></div>");
                            showgoogle();
                        } else {
                            //    $(".grid_div").append("<div class='totalresultsclassGrid'>" + x.hits.total + " results </div></div></div>");
                            var totalres; // all results on page
                            if (x.hits.total > 10)
                                totalres = 10;

                            else
                                totalres = x.hits.total;
                            for (var p = ((pagegrid - 1) * 10) + 1; p <= totalres * pagegrid; p++) { // here is where pagination goes.
                                var image = '<img id="img" src="/images/' + x.hits.hits[p - 1]._source.messageid + '.jpg" width="300" height="200">';
                                if (validURL(x.hits.hits[p - 1]._source.affiliatelink)) {
                                    if (x.hits.hits[p - 1]._source.score == 0.0)
                                        var resulttemplate = "<div class='grid-item'><a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'>" + p + image + (x.hits.hits[p - 1]._source.subject).substr(0, 60) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + " <h4>Click to see more.</h4>" + "<br><br>" + "<div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div>";
                                    else
                                        var resulttemplate = "<div class='grid-item'><a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'>" + p + image + (x.hits.hits[p - 1]._source.subject).substr(0, 60) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + "<h4>Click to see more.</h4>" + "<br><br>" + "<div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div>";
                                } else {
                                    if (x.hits.hits[p - 1]._source.score == 0.0)
                                        var resulttemplate = "<div class='grid-item'><a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'>" + p + image + (x.hits.hits[p - 1]._source.subject).substr(0, 60) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + "<h4>Click to see more.</h4>" + "<br><br>" + "<div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div>";
                                    else
                                        var resulttemplate = "<div class='grid-item'><a target='_blank' href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' style='color:white; text-decoration: none;'><div class='col-sm-10 result_div'><div class='counter'>" + p + image + "</div>" + (x.hits.hits[p - 1]._source.subject).substr(0, 60) + "<a href = '/SearchAPI/Get_File/" + x.hits.hits[p - 1]._source.messageid + "' target='_blank' style='color:white; text-decoration: none;'><br><p class='addrFrom'> @" + x.hits.hits[p - 1]._source.addrfrom.split("@")[1] + "</p><div class='campaignDesc'>" + (x.hits.hits[p - 1]._source.excerpt).substr(0, 200).replace(regExpressionSpecialCharacters, "").replace(regExpressionLongWords, '') + "<h4>Click to see more.</h4></div></div><div class='resultWra'><div class='ratingResult'>" + "</div><br><br> <div type='submit' class='btn btn-primary subscribeButton'><a target='_blank' class='optinlinkclass' style='text-decoration: none; color:white' href='" + x.hits.hits[p - 1]._source.optin + "'>Subscribe</a></div></div><br></div></div></a></div>";
                                }
                                $(".grid_div").append(resulttemplate);
                            }

                        }

                    }

                    var image_loading = document.getElementById('loading');
                    
                    image_loading.parentNode.removeChild(image_loading);




                    isActive = false;

                }
                $("#searchString2").focus();
                var input = document.getElementById("searchString2");
                input.addEventListener("keyup", function (event) {
                    if (event.keyCode === 13) {
                        event.preventDefault();
                        goonresults();
                    }
                });


            

        }

        var googleapilink = "https://www.googleapis.com/customsearch/v1?key=AIzaSyCl_HnMB0IemD7RU40Egwk4dfslKog3ifw&cx=007543547403231751187:ezirirggxb4&q=" + window.location.href.split("?q=")[1] + "&callback=hndlr";

        var page = 1;

        var pageGRID = 1;

        function next() {
            
            page++;

            view = AsignValue();

            if (view == true) {

                GetAPIGrid(page = page);
            }

            else {


                GetAPI(page);
            }
        }

        function last() {

            page--;

            view = AsignValue();

            if (view == true) {

                GetAPIGrid(page = page);
            }


            else {

                GetAPI(page);
            }

        }
        function specific(number) {


            page++;
            view = AsignValue();
            if (view == true) {

                GetAPIGrid(page = page);

            }

            else {


                GetAPI(page);
            }
        }

        function showgoogle() {
            $.getScript(googleapilink, function () {
                $(".results_div").append("<div class='col-sm-10 result_div'><div class='resultHeading col-sm-9'><div class='totalresultsclass'> 0 results for emails!, search on web: <br><br><div id='contentgoogle'>" + contentgoogle + "</div> </div></div></div>");

            });
        }

   
</script>



</head>

<body>

    <script>
        function getHash(str, algo = "SHA-256") {
            let strBuf = new TextEncoder('utf-8').encode(str);
            return crypto.subtle.digest(algo, strBuf)
                .then(hash => {
                    window.hash = hash;

                    // Hash is an arrayBuffer,

                    // So we'll connvert it to its hex version

                    let result = '';
                    const view = new DataView(hash);
                    for (let i = 0; i < hash.byteLength; i += 4) {
                        result += ('00000000' + view.getUint32(i).toString(16)).slice(-8);
                    }
                    return " " + result;
                });
        }
     
        function AsignValue() {

            view = getCookie("view");

            if (view == "grid") {

                return true;

            } else {

                return false;
            }
        }

        function toggle() {

                // Reseting the values after the changing the view.

                page = 1;
                pageGRID = 1;
                // Change the layout. 
                GridLayout();
            


        }




        
        function GridLayout() {
            grid = AsignValue();
            grid = !grid; // Change the value

            if (grid == true) {

                GetAPIGrid(pageGRID);
                pageGRID++;
                setCookie("view", "grid", 5);
                $('#gridLayout').css("background-color", "blue");
                $('#listLayout').css("background-color", "none");



            } else {

                GetAPI(page = page);
                page++;
                setCookie("view", "normal", 5);
                $('#listLayout').css("background-color", "blue");
                $('#gridLayout').css("background-color", "none");
            }
        }

        function getCookie(name) {
            var cname = name + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(cname) == 0) {
                    return c.substring(cname.length, c.length);
                }
            }
            return "";
        }

        function callback(data) {
            getHash(data.country_name)
                .then(hash => {
                    sessionStorage.setItem("country", hash);
                });
        }


        if (sessionStorage.getItem("country") == null) {
            var script1 = document.createElement('script');
            script1.type = 'text/javascript';
            script1.src = 'https://geoip-db.com/jsonp';
            var h = document.getElementsByTagName('script')[0];
            h.parentNode.insertBefore(script1, h);
        }


        document.addEventListener("DOMContentLoaded", function () {
            ChangeValue();
        
        });


        function ChangeValue() {
         

        }


        </script>

    <div id="container">
        <div id="header">
            <!-- Header start -->

          

          

           
            <ul>

                <div style="float: right; font-weight: 900; display:inline;">
                    <!-- The grid & list view buttons.. -->
                    <li>
                        <div class="buttons">
                            <div class="list" id="listView"><i class="fa fa-list fa-2x"></i></div>
                            <div class="grid" id="gridView"><i class="fa fa-th-large fa-2x"></i></div>
                        </div>
                    </li>
                    <li><a class="header_links" href="/Account/Login">LOG IN</a></li>
                    <li><a class="header_links" href="/Account/Register">SIGN UP</a></li>
                    <li><a class="header_links" href="">PRICING</a></li>
                </div>
            </ul>

            <!-- Header end -->
        </div>
        <div id="body">
            <!-- Body start -->
            <a style="max-height: 50px;" href="searchpage.html"><img src="images/Emmares_logo.png" alt="EMMARES" class="logo_left"></a>
            <div class="container">

                <div id="searchBox" class="form-group col-sm-5">
                    <!-- <label for="exampleInputEmail1">What are you looking for. </label> -->

                    <input type="text" class="form-control" id="searchString2" aria-describedby="searchHelp" placeholder="What are you looking for?">
                    <button onclick="goonresults();" id="submitButton" type="submit" class="btn btn-primary">Go</button>
                    <small id="searchHelp" class="form-text text-muted"></small>
                </div>

                <!-- <label for="exampleInputEmail1">What are you looking for. </label> -->
                <div class="col-sm-12 results_div">



                </div>
                <!-- Here is the special grid view -->

                <div class="col-sm-12 grid_div">


                </div>



                <!-- Pagination -->



            </div>

                <!-- Body end -->
            </div>
       
    </div>
</body>

</html>